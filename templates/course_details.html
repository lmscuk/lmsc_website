{% extends 'base.html' %} {% block title %}{{ page_title or 'Course Details -
London Maths & Science College' }}{% endblock %} {% block meta_description %} {%
if meta_description %}
<meta name="description" content="{{ meta_description }}" />
{% else %}
<meta
  name="description"
  content="Explore detailed course information at London Maths & Science College, including outcomes, enrichment and entry guidance."
/>
{% endif %} {% endblock %} {% block extra_head %}
<style>
  .fade-in {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
  }

  .fade-in.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .scale-in {
    opacity: 0;
    transform: scale(0.97);
    transition: opacity 0.5s ease-out, transform 0.5s ease-out;
  }

  .scale-in.visible {
    opacity: 1;
    transform: scale(1);
  }

  .stagger-1 {
    transition-delay: 0.1s;
  }

  .stagger-2 {
    transition-delay: 0.2s;
  }

  .stagger-3 {
    transition-delay: 0.3s;
  }

  .cms-rich-content {
    color: #374151;
    font-size: 1.0625rem;
    line-height: 1.8;
  }

  .cms-rich-content > * + * {
    margin-top: 1.25rem;
  }

  .cms-rich-content h2,
  .cms-rich-content h3,
  .cms-rich-content h4 {
    color: #0f766e;
    font-weight: 700;
  }

  .cms-rich-content h2 {
    font-size: 1.75rem;
    margin-top: 2.5rem;
  }

  .cms-rich-content h3 {
    font-size: 1.375rem;
    margin-top: 2rem;
  }

  .cms-rich-content h4 {
    font-size: 1.125rem;
    margin-top: 1.5rem;
  }

  .cms-rich-content p {
    margin: 0;
  }

  .cms-rich-content ul,
  .cms-rich-content ol {
    margin: 0;
    padding-left: 1.5rem;
  }

  .cms-rich-content ul li,
  .cms-rich-content ol li {
    margin-top: 0.75rem;
  }

  .cms-rich-content a {
    color: #047857;
    text-decoration: underline;
    text-decoration-thickness: 0.08em;
  }

  .cms-rich-content strong {
    color: #0f172a;
    font-weight: 700;
  }

  .cms-rich-content blockquote {
    border-left: 4px solid #0f766e;
    padding-left: 1.5rem;
    margin: 2rem 0 2.5rem;
    color: #065f46;
    font-style: italic;
  }
</style>
{% endblock %} {% block content %}
<section class="py-8 px-6 text-sm">
  <div class="container mx-auto px-0">
    <a
      href="{{ url_for('courses') }}"
      class="inline-flex items-center gap-2 text-emerald-900 hover:text-emerald-700 transition"
    >
      <svg
        class="w-4 h-4"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
        aria-hidden="true"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M10 19l-7-7 7-7m11 14H5"
        />
      </svg>
      Back to courses
    </a>
  </div>
</section>

<section class="py-14 px-6">
  <div class="container mx-auto text-center max-w-4xl">
    {% if course['level'] %}
    <span
      class="inline-block px-4 py-2 text-xs md:text-sm font-semibold bg-[#C5F3C5] text-emerald-700 rounded-full mb-5 fade-in"
    >
      {{ course['level'] }} pathway
    </span>
    {% endif %}
    <h1 class="text-4xl md:text-5xl font-bold text-primary mb-4 fade-in">
      {{ course['title'] }}
    </h1>
    {% if course['short_description'] %}
    <p class="text-gray-600 max-w-2xl mx-auto fade-in">
      {{ course['short_description'] }}
    </p>
    {% endif %}
  </div>
</section>

<section class="py-8 px-6">
  <div class="container mx-auto">
    <div
      class="rounded-3xl overflow-hidden bg-gray-200 flex items-center justify-center h-72 md:h-[420px] scale-in"
    >
      {% set image_path = course['image_path'] if course['image_path'] else None
      %} {% if image_path %}
      <img
        src="{{ url_for('static', filename=image_path) }}"
        alt="{{ course['image_alt'] or course['title'] }}"
        class="w-full h-full object-cover"
        loading="lazy"
      />
      {% else %}
      <div class="text-emerald-900 text-center px-6">
        <p class="font-semibold">Course imagery coming soon</p>
        <p class="text-sm text-emerald-800/80 mt-1">
          The admissions team can share the full visual prospectus on request.
        </p>
      </div>
      {% endif %}
    </div>
  </div>
</section>

<section class="py-16">
  <div class="container mx-auto px-6">
    <div class="grid md:grid-cols-3 gap-16">
      <div class="md:col-span-2 space-y-16">
        {% if about_html %}
        <div>
          <h2 class="font-bold text-primary mb-6 text-2xl">About the course</h2>
          <div class="cms-rich-content fade-in">{{ about_html|safe }}</div>
        </div>
        {% endif %} {% if course['custom_content'] %}
        <div>
          <div class="cms-rich-content fade-in">
            {{ course['custom_content'] | safe }}
          </div>
        </div>
        {% endif %} {% if study_topics_html %}
        <div>
          <h2 class="font-bold text-primary mb-6 text-2xl">
            What you'll study
          </h2>
          <div class="cms-rich-content fade-in">
            {{ study_topics_html|safe }}
          </div>
        </div>
        {% endif %} {% if skills_built_html %}
        <div>
          <h2 class="font-bold text-primary mb-6 text-2xl">
            What you'll study
          </h2>
          <div class="cms-rich-content fade-in">
            {{ skills_built_html|safe }}
          </div>
        </div>
        {% endif %} {% if audience_notes_html %}
        <div>
          <h2 class="font-bold text-primary mb-6 text-2xl">
            What you'll study
          </h2>
          <div class="cms-rich-content fade-in">
            {{ audience_notes_html|safe }}
          </div>
        </div>
        {% endif %} {% if exam_html or entry_html or outcome_html or
        progression_html %}
        <div class="grid md:grid-cols-2 gap-10">
          {% if exam_html %}
          <div>
            <h2 class="font-bold text-primary mb-4 text-2xl">Exam details</h2>
            <div class="cms-rich-content fade-in">{{ exam_html|safe }}</div>
          </div>
          {% endif %} {% if entry_html %}
          <div>
            <h2 class="font-bold text-primary mb-4 text-2xl">
              Entry requirements
            </h2>
            <div class="cms-rich-content fade-in">{{ entry_html|safe }}</div>
          </div>
          {% endif %} {% if outcome_html %}
          <div>
            <h2 class="font-bold text-primary mb-4 text-2xl">Course outcome</h2>
            <div class="cms-rich-content fade-in">{{ outcome_html|safe }}</div>
          </div>
          {% endif %} {% if progression_html %}
          <div>
            <h2 class="font-bold text-primary mb-4 text-2xl">
              Progression to university
            </h2>
            <div class="cms-rich-content fade-in">
              {{ progression_html|safe }}
            </div>
          </div>
          {% endif %}
        </div>
        {% endif %} {% if faq_items %}
        <div>
          <h2 class="font-bold text-primary mb-6 text-2xl">
            Frequently asked questions
          </h2>
          <div class="space-y-6">
            {% for item in faq_items %}
            <article class="border border-emerald-100 rounded-2xl p-6">
              <h3 class="font-semibold text-gray-900 mb-3">
                {{ item['question'] }}
              </h3>
              <p class="text-gray-600 leading-relaxed">{{ item['answer'] }}</p>
            </article>
            {% endfor %}
          </div>
        </div>
        {% endif %}
      </div>

      <aside class="md:col-span-1">
        <div class="bg-white shadow rounded-2xl p-8 sticky top-8 space-y-8">
          {% if course['sidebar_fees'] %}
          <div>
            <p class="text-4xl font-bold text-primary">
              {{ course['sidebar_fees'] }}
            </p>
            {% if course['sidebar_summary'] %}
            <p class="text-gray-600 text-sm mt-3">
              {{ course['sidebar_summary'] }}
            </p>
            {% endif %}
          </div>
          {% elif course['sidebar_summary'] %}
          <div>
            <p class="text-gray-600 text-sm">{{ course['sidebar_summary'] }}</p>
          </div>
          {% else %}
          <div>
            <p class="text-gray-600 text-sm">
              Contact the admissions team for tailored pricing and delivery
              options.
            </p>
          </div>
          {% endif %}

          <a
            href="{{ url_for('book_consultation') }}"
            class="w-full bg-emerald-900 hover:bg-emerald-800 text-white px-8 py-4 rounded-full inline-flex items-center justify-center gap-2 transition"
          >
            Book a consultation
          </a>

          {% if includes_items %}
          <div>
            <p class="font-bold text-gray-900 mb-4">This course includes</p>
            <ul class="space-y-3 text-sm">
              {% for include in includes_items %}
              <li class="flex items-start gap-3 text-gray-600">
                <svg
                  class="w-5 h-5 text-primary mt-0.5 flex-shrink-0"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                  aria-hidden="true"
                >
                  <path
                    fill-rule="evenodd"
                    d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                    clip-rule="evenodd"
                  ></path>
                </svg>
                <span>{{ include }}</span>
              </li>
              {% endfor %}
            </ul>
          </div>
          {% endif %}

          <div
            class="border border-emerald-100 rounded-2xl p-6 bg-emerald-50/60"
          >
            <p class="text-sm text-emerald-900">
              Want a personalised pathway? Our admissions advisors will help you
              combine modules across STEM disciplines.
            </p>
          </div>
        </div>
      </aside>
    </div>
  </div>
</section>

<section class="py-20 bg-gradient-to-br from-[#fefffe] to-[#ecf8f4]">
  <div class="container mx-auto px-6 grid md:grid-cols-2 gap-16 items-center">
    <div class="scale-in">
      <span
        class="inline-block px-4 py-2 font-bold bg-[#C5F3C5] text-lime-700 text-sm rounded-full rotate-[-6deg] mb-5"
      >
        Next steps
      </span>
      <h2 class="font-bold text-primary mb-4">
        Ready to discuss your study options?
      </h2>
      <p class="text-gray-700 mb-8 leading-relaxed">
        Book a consultation for tailored guidance on admissions, timetable
        planning and portfolio preparation. We will map a personalised
        progression route for your ambitions.
      </p>
      <div class="flex flex-wrap gap-4">
        <a
          href="{{ url_for('book_consultation') }}"
          class="switch-btn bg-emerald-900 hover:bg-emerald-800 text-white px-8 py-4 rounded-full font-semibold transition-all duration-300 overflow-hidden"
        >
          <div class="btn-content justify-center">
            <span class="text-part">Book a Consultation</span>
            <span
              class="icon-part flex items-center justify-center w-8 h-8 bg-lime-300 rounded-full"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5 text-emerald-900"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2.5"
                  d="M13 7l5 5m0 0l-5 5m5-5H6"
                />
              </svg>
            </span>
          </div>
        </a>
        <a
          href="{{ url_for('courses') }}"
          class="px-8 py-4 rounded-full border border-emerald-900 text-emerald-900 hover:bg-emerald-50 transition"
        >
          View all courses
        </a>
      </div>
    </div>
    <div class="scale-in stagger-2">
      <div class="bg-white rounded-3xl p-8 shadow-lg">
        <p class="text-emerald-900 font-semibold mb-4">Course highlights</p>
        <ul class="space-y-3 text-gray-600 text-sm">
          {% if study_topics %}
          <li class="flex items-start gap-3">
            <span class="mt-1 h-2 w-2 rounded-full bg-emerald-600"></span>
            <span
              >Focused modules across {{ study_topics | length }} specialist
              topic{{ 's' if study_topics | length != 1 }}</span
            >
          </li>
          {% endif %} {% if skills_built %}
          <li class="flex items-start gap-3">
            <span class="mt-1 h-2 w-2 rounded-full bg-emerald-600"></span>
            <span
              >Build {{ skills_built | length }} career-ready skill{{ 's' if
              skills_built | length != 1 }}</span
            >
          </li>
          {% endif %}
          <li class="flex items-start gap-3">
            <span class="mt-1 h-2 w-2 rounded-full bg-emerald-600"></span>
            <span
              >Dedicated 1:1 support with admissions and progression
              coaching</span
            >
          </li>
          <li class="flex items-start gap-3">
            <span class="mt-1 h-2 w-2 rounded-full bg-emerald-600"></span>
            <span
              >Hyflex learning environment combining campus and digital studio
              sessions</span
            >
          </li>
        </ul>
      </div>
    </div>
  </div>
</section>

<section class="py-20">
  <div class="container mx-auto px-6">
    <div class="text-center mb-16 fade-in">
      <h2 class="text-primary font-bold text-3xl mb-4">Related courses</h2>
      <p class="text-gray-600 max-w-2xl mx-auto">
        Explore other programmes that pair well with {{ course['title'] }} or
        extend your specialist focus.
      </p>
    </div>
    {% if related_courses %}
    <div class="grid md:grid-cols-3 gap-8">
      {% for related in related_courses %} {% set rc_image =
      related['image_path'] if related['image_path'] else None %} {% set rc_src
      = url_for('static', filename=rc_image) if rc_image else None %}
      <a href="{{ url_for('course_details', slug=related['slug']) }}">
        <article
          class="bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-lg transition-shadow scale-in {{ 'stagger-' ~ loop.index if loop.index <= 3 else '' }}"
        >
          <div class="p-4">
            {% if related['level'] %}
            <span
              class="inline-block bg-gray-100 text-gray-600 px-3 py-1 rounded-full text-xs font-medium mb-3"
            >
              {{ related['level'] }}
            </span>
            {% endif %}
            <h3 class="font-bold mb-3 text-gray-900">{{ related['title'] }}</h3>
            <div
              class="aspect-video bg-gray-200 rounded-xl overflow-hidden mb-4"
            >
              {% if rc_src %}
              <img
                src="{{ rc_src }}"
                alt="{{ related['image_alt'] or related['title'] }}"
                class="w-full h-full object-cover"
                loading="lazy"
              />
              {% else %}
              <div
                class="flex h-full items-center justify-center bg-emerald-50 text-emerald-700 text-sm font-semibold"
              >
                Imagery coming soon
              </div>
              {% endif %}
            </div>
            <p class="text-gray-600 text-sm mb-4">
              {{ related['short_description'] }}
            </p>
            <div class="flex items-center gap-2 text-gray-700">
              <svg
                class="w-5 h-5"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"
                ></path>
              </svg>
              <span class="text-sm font-medium">
                {% if related['hours'] %} {{ related['hours'] }} guided hours {%
                else %} Flexible pacing {% endif %}
              </span>
            </div>
          </div>
        </article>
      </a>
      {% endfor %}
    </div>
    {% else %}
    <div
      class="rounded-2xl border border-dashed border-emerald-200 bg-emerald-50/50 p-10 text-center text-emerald-900"
    >
      <h3 class="text-lg font-semibold">More courses are being prepared.</h3>
      <p class="mt-2 text-sm">
        Talk to admissions about upcoming launches and custom pathways.
      </p>
    </div>
    {% endif %}
  </div>
</section>
{% endblock %} {% block extra_scripts %}
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("visible");
          }
        });
      },
      {
        threshold: 0.1,
        rootMargin: "0px 0px -50px 0px",
      }
    );

    document
      .querySelectorAll(".fade-in, .scale-in")
      .forEach((el) => observer.observe(el));

    document.querySelectorAll(".cms-rich-content a").forEach((anchor) => {
      anchor.setAttribute("target", "_blank");
      anchor.setAttribute("rel", "noopener");
    });
  });
</script>
{% endblock %}
